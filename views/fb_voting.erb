<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="referrer" content="origin">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Page de vote facebook">
    <meta name="author" content="LaPrimaire.org">
    <title>Page de vote facebook - LaPrimaire.org"</title>
    <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> 
    <link rel="stylesheet" href="https://s3.eu-central-1.amazonaws.com/laprimaire/styles/application-cbbc745bd85.css">
    <link rel="canonical" href="https://laprimaire.org/citoyen/vote/facebook_voting">
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<style>
ul.social_buttons > li{
	display: inline-block;
	margin-bottom: 5px;
}

.intro-heading span {
	color: #d91d1c;
	font-weight:bold;
}
.intro-heading {
	font-size: 24px !important;
	color: #527bdd;
}
.intro-lead-in {
	font-size: 16px !important;
	line-height: 20px !important;
}
.photo {
	max-width: 230px;
	margin:0 auto;
	height: 100%;
	max-height: 310px;
	background-position: center center;
	background-repeat: no-repeat;
	overflow: hidden;
}
.hero-feature h3 {
	font-size: 22px;
	margin-top: 10px;
}
.hero-feature h3 span { color: #d91d1c; font-weight: bold; }
.hero-feature p { font-size: 13px; }
.hero-feature img { height: 300px; }
.photo img {
	min-height: 100%;
	min-width: 100%;
	/* IE 8 */
	-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
	/* IE 5-7 */
	filter: alpha(opacity=0);
	/* modern browsers */
	opacity: 0;
}
.hero-feature .blue:hover { background-color:#d91d1c; border-color:red;}
.caption h3 { text-align:center; }
.caption { text-align:justify; }
@media (min-width:980px) {
	.modal-dialog {width:820px;}
	.intro-text {
		padding-top:15px !important;
		padding-bottom:0px !important;
	}
}
.btn.red:hover {
	border-color:#fec503;
	background-color:#fec503;
}
.btn.candidat {
	font-size:13px;
	padding:2px 8px;
}
.thumbnail.pending {
	border:0px;
	background-color:#ffdab9;
}
.thumbnail.absent {
	border:0px;
	background-color:#ffe4e1;
}
.thumbnail.error {
	border:0px;
	background-color:#ffcccc;
}
.thumbnail.success {
	border:0px;
	background-color:#ccffcc;
}
#no-missing-vote {
	font-weight:bold;
	font-size: 20px;
	color:#70cc70;
}
#nb-missing-votes {
	font-weight:bold;
	font-size: 20px;
	color:#d91d1c;
}
.nohover:hover {
	background:none !important;
}
.fa-stack-2x {
	font-size: 42px;
	padding:5px;
}
.fa-stack-1x {
	font-size: 24px;
	top: -2px;
}
.fa-stack.bleu { 
	color:#527bdd;
	line-height:10px;
	height:12px;
}
.fa-stack.rouge { color:#d91d1c; }
.row {
	margin-right:0px;
	margin-left:0px;
}
.soutien {
	height:80px !important;
	width:80px !important;
	border:4px solid #527bdd;
	position:absolute;
	bottom:-5px;
	left:10px;
}
.soutien.deux { left:80px; }
.soutien.trois { left:150px; }
</style>
</head>


<!-- Header -->
<body class="index" style="padding-bottom:0px;">
<div id="fb-root"></div>

    <div class="modal fade cocorico" id="voting_frame_cc" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	    <div class="modal-dialog vote" role="document">
		    <div class="modal-content">
			    <div class="modal-body" >
				    <div style="margin:0 auto;background:#527bdd;height:100%;" id="voting_frame_loading">
					    <div style="margin:0 auto;padding-top:100px;padding-bottom:100px;width:300px;color:white;text-align:center;">
						    <p>Chargement du vote en cours...</p>
						    <p><i style="width:100px;text-align:center;" class="fa fa-refresh fa-spin fa-3x fa-fw" aria-hidden="true"></i></p>
						    <span class="sr-only">Refreshing...</span>
						    <p>Vous disposez de 10 minutes pour voter.</p>
						    <p style="font-style:italic;">(Vous pouvez à tout moment fermer cette fenêtre et revenir plus tard)</p>
					    </div>
				    </div>
				    <iframe id="voting_frame_iframe" width="100%" height="550px" style="display:none;" frameborder="0"></iframe>
				    <div style="display:none;margin:0 auto;background:rgb(104,205,104);height:100%;" id="voting_frame_donation">
					    <div style="margin:0 auto;padding:50px 50px;color:white;text-align:center;">
						    <p style="font-size:20px;">Merci beaucoup pour votre participation !</p>
						    <p><i style="font-size:100px;display:inline;" class="fa fa-gift" aria-hidden="true"></i></p>
						    <p style="text-align:justify;">LaPrimaire.org est 100% gratuite. Cependant, pour accompagner le ou la candidat(e) qui sera issu(e) de LaPrimaire.org dans sa campagne électorale et son financement ainsi que pour l'organisation à venir de <b>577 primaires pour les élections législatives</b>, nous avons vraiment besoin de votre soutien ! Si vous êtes en capacité de soutenir financièrement LaPrimaire.org, n'hésitez pas à :</p>
						    <p><a target="_blank" href="/adherer/" style="font-size:28px;font-variant:small-caps;width:250px;cursor:pointer;" class="btn btn-xl blue donate-link" title="Faire un don">Faire un don</a></p>
						    <p><i>Chaque don compte !</i></p>
					    </div>
				    </div>
			    </div>
		    </div>
	    </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script>
function resizeIframe(obj){
	obj.style.height = 0;
	obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
}
/* google analytics */
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-60977053-1', 'auto');
ga('send', 'pageview');

$(document).ready(function() {
		window.addEventListener("message",receiveMessage,true);
		function receiveMessage(e) { 
			console.log(e);
			if (e.origin!=='https://laprimaire.cocorico.cc') {
				return;
			}
			var data=JSON.parse(e['data']);
			var voteId=data['vote']['id'];
			if (data['message']=='voteComplete') {
				$('#voting_frame_iframe').attr("src",'about:blank');
				$('#voting_frame_iframe').hide();
				$('#voting_frame_donation').show();
				//$('.modal.cocorico').modal('hide');
			} else if (data['message']=='voteSuccess') {
			} else if (data['message']=='voteError') {
				$('.modal.cocorico').modal('hide');
			} else if (data['message']=='voteCanceled') {
				$('.modal.cocorico').modal('hide');
			}
		};
		$('#voting_frame_cc').on('hidden.bs.modal', function () {
			$('#voting_frame_loading').show();
			$('#voting_frame_iframe').hide();
			$('#voting_iframe').attr("src",'about:blank');
		});
		$('#voting_frame_cc').on('shown.bs.modal', function () {
			$('#voting_frame_donation').hide();
			$('#voting_frame_iframe').load(function() { 
				$('#voting_frame_loading').hide();
				if ($('#voting_frame_iframe').attr("src")!='about:blank') {
					$('#voting_frame_iframe').show();
				}
			});
			$.ajax({
				url: "/api/token/facebook_voting",
				data: "vote_id=<%= cc_vote_id %>&firstname=thibauld&lastname=favre",
				dataType: "json",
				success: function(data) {
					console.log(data);
					$('#voting_frame_iframe').attr("src",'https://<%= COCORICO_HOST %>/embed/vote-widget/<%= cc_vote_id %>?user='+data['token']+'&appId=<%= cocorico_app_id %>&locale=fr-FR');
				},
				error: function(data) {
					console.log("votes are paused. reloading page...");
					window.location.reload(true);
				}
			});
		});
		$('#voting_frame_cc').modal();
});
    </script>
    <script src="https://use.fontawesome.com/1e37fa74cb.js"></script>
  </body>
</html>
